<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>How-to use tomcat 8 Resources to setup web application</title>
    <meta name="description" content="" />
    <link href="//fonts.googleapis.com/css?family=Noto+Sans:300,400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic" rel="stylesheet" type="text/css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="//tcollignon.github.io/themes/saga/assets/css/style.css?v=1499752262541" rel="stylesheet" type="text/css">
    <link href="//tcollignon.github.io/themes/saga/assets/css/animate.min.css?v=1499752262541" rel="stylesheet" type="text/css">
    <link href="https://tcollignon.github.io/favicon.ico" rel="shortcut icon">
    <link rel="canonical" href="https://tcollignon.github.io/2015/05/08/How-to-use-tomcat-8-Resources-to-setup-web-application.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="TCO Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="How-to use tomcat 8 Resources to setup web application" />
    <meta property="og:description" content="This mecanism allow user to start webapp in tomcat 8 without packaging (like WAR). This is interesting in development, to run application as fast as possible. In Tomcat 6x, 7x this is called Virtual Web App, in Tomcat 8x there is a new way to do this : Resources Documentation about" />
    <meta property="og:url" content="https://tcollignon.github.io/2015/05/08/How-to-use-tomcat-8-Resources-to-setup-web-application.html" />
    <meta property="article:tag" content="Tomcat" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How-to use tomcat 8 Resources to setup web application" />
    <meta name="twitter:description" content="This mecanism allow user to start webapp in tomcat 8 without packaging (like WAR). This is interesting in development, to run application as fast as possible. In Tomcat 6x, 7x this is called Virtual Web App, in Tomcat 8x there is a new way to do this : Resources Documentation about" />
    <meta name="twitter:url" content="https://tcollignon.github.io/2015/05/08/How-to-use-tomcat-8-Resources-to-setup-web-application.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="TCO Blog" href="https://tcollignon.github.io/rss/" />
</head>
<body class="post-template tag-Tomcat">
    <header id="header" class="animated fadeIn">
    <div class="header-background">
    <section class="blog-content">
        <a id="site-url" class="blog-title" href="https://tcollignon.github.io">TCO Blog</a>
        <span class="blog-description">Blog about Java, Maven, Jenkins and others </span>
        <nav class="links fadeIn animated">
            <ul>
                <li class="rss"><a title="RSS Feed" href="/rss/"><i class="fa fa-fw fa-rss-square"></i></a></li>
        
            </ul>
        </nav>
    </section>
    <section class="header-content">
        <h1 class="post-title animated fadeInUp">How-to use tomcat 8 Resources to setup web application</h1>
        <span class="post-data"><span class="date animated fadeInUp"><i class="fa fa-clock-o"></i> <time class="timesince date" data-timesince="1431036000" datetime="2015-05-08T00:00" title="08 May 2015">2 years ago</time></span>
            <span class="tags animated fadeInUp"><i class="fa fa-tags"></i> <a href="https://tcollignon.github.io/tag/Tomcat/">Tomcat</a></span>
            <span class="author animated fadeInUp"><i class="fa fa-user"></i> <a href="https://tcollignon.github.io/author/tcollignon/">COLLIGNON Thomas</a></span></span>
    </section>
    </div>
</header>
<main id="main" class="content">
    <article itemtype="http://schema.org/BlogPosting" class="animated fadeIn content post post tag-Tomcat">
        <section class="post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This mecanism allow user to start webapp in tomcat 8 without packaging (like WAR).</p>
</div>
<div class="paragraph">
<p>This is interesting in development, to run application as fast as possible.</p>
</div>
<div class="paragraph">
<p>In Tomcat 6x, 7x this is called <em>Virtual Web App</em>, in Tomcat 8x there is a new way to do this : Resources</p>
</div>
<div class="paragraph">
<p>Documentation about Tomcat Resources is here : <a href="https://tomcat.apache.org/tomcat-8.0-doc/config/resources.html" class="bare">https://tomcat.apache.org/tomcat-8.0-doc/config/resources.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_write_the_configuration">Write the configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this, it&#8217;s necessary to write webapp configuration in tomcat <em>server.xml</em> file.</p>
</div>
<div class="paragraph">
<p>This is an example for an application with some jars, java classes and web parts (jsp and web.xml).</p>
</div>
<div class="paragraph">
<p>The structure of application in the repository is :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>testWebapp</p>
<div class="ulist">
<ul>
<li>
<p>src/main/java</p>
<div class="ulist">
<ul>
<li>
<p>some java files</p>
</li>
</ul>
</div>
</li>
<li>
<p>src/main/webapp</p>
<div class="ulist">
<ul>
<li>
<p>somes jsp</p>
</li>
<li>
<p>WEB-INF/web.xml</p>
</li>
</ul>
</div>
</li>
<li>
<p>pom.xml <em>with jar dependencies</em> (hibernate for example)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Classic way will packaging a WAR file with this structure :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>META-INF</p>
</li>
<li>
<p>WEB-INF</p>
<div class="ulist">
<ul>
<li>
<p>classes <em>(contains .class files)</em></p>
</li>
<li>
<p>lib <em>(contains .jar files)</em></p>
</li>
<li>
<p>web.xml</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>With tomcat resources, we package nothing, and just write into server.xml file :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;Context docBase="/tmp/testWebapp/src/main/webapp" path="/testWebapp" reloadable="false"&gt;
 &lt;Resources&gt;
  &lt;PostResources base="/tmp/testWebapp/target/classes"
                className="org.apache.catalina.webresources.DirResourceSet"
                webAppMount="/WEB-INF/classes"/&gt;
  &lt;PostResources base="/Work/mavenRepository/org/hibernate/hibernate-core/4.3.7.Final/hibernate-core-4.3.7.Final.jar"
                className="org.apache.catalina.webresources.JarResourceSet"
                webAppMount="/WEB-INF/classes"/&gt;
 &lt;/Resources&gt;
&lt;/Context&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The order of each <em>Resources</em> declaration is important for the tomcat classloader.</p>
</div>
<div class="paragraph">
<p>It&#8217;s surprising to mount jar in <em>WEB-INF/classes</em> instead of <em>WEB-INF/lib</em>, but this is the only way I found to make it work correctly with <em>JarResourceSet</em>. The next configuration is dangerous, because it&#8217;s not link the right jar, and cause wrong loading in application, I suggest to not using this :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;Context docBase="/tmp/testWebapp/src/main/webapp" path="/testWebapp" reloadable="false"&gt;
 &lt;Resources&gt;
  &lt;PostResources base="/tmp/testWebapp/target/classes"
                className="org.apache.catalina.webresources.DirResourceSet"
                webAppMount="/WEB-INF/classes"/&gt;
  &lt;PostResources base="/Work/mavenRepository/org/hibernate/hibernate-core/4.3.7.Final"
                className="org.apache.catalina.webresources.DirResourceSet"
                webAppMount="/WEB-INF/lib"/&gt;
 &lt;/Resources&gt;
&lt;/Context&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_who_use_this">Who use this ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/tesla/m2eclipse-webby">Webby</a> use <a href="https://codehaus-cargo.github.io/cargo/Home.html">cargo</a> with Virtual Web App concept to run application in eclipse.</p>
</div>
<div class="paragraph">
<p>This is pretty faster than other way (like WTP), because it pick-up jars in Maven local repository, and will not paste each jar in temporay folder. Each jar is declared in tomcat <em>server.xml</em> configuration file.</p>
</div>
</div>
</div>
        </section>

    
        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'https-tcollignon-github-io'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>
    
    </article>

</main>
    <footer class="animated fadeIn" id="footer">
        <section class="colophon">
          <section class="copyright">Copyright &copy; <span itemprop="copyrightHolder">TCO Blog</span>. <span rel="license">All Rights Reserved</span>.</section>
          <section class="poweredby">Published with <a class="icon-ghost" href="http://hubpress.io">HubPress</a></section>
        </section>
        <section class="bottom">
          <section class="attribution">
            <a href="http://github.com/Reedyn/Saga">Built with <i class="fa fa-heart"></i> and Free and Open-Source Software</a>.
          </section>
        </section>
    </footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
    <script src="//tcollignon.github.io/themes/saga/assets/js/scripts.js?v=1499752262541"></script>
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-88524010-1', 'auto');
    ga('send', 'pageview');

    </script>
</body>
</html>
