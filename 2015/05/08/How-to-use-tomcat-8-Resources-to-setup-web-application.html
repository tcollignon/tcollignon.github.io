<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>How-to use tomcat 8 Resources to setup web application</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://tcollignon.github.io/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:400,700,400italic,700italic|Open+Sans:400italic,700italic,700,400">
    <link rel="stylesheet" type="text/css" href="//tcollignon.github.io/themes/roon/assets/css/screen.css?v=1519286230112" />

    <link rel="canonical" href="https://tcollignon.github.io/2015/05/08/How-to-use-tomcat-8-Resources-to-setup-web-application.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="TCO Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="How-to use tomcat 8 Resources to setup web application" />
    <meta property="og:description" content="This mecanism allow user to start webapp in tomcat 8 without packaging (like WAR). This is interesting in development, to run application as fast as possible. In Tomcat 6x, 7x this is called Virtual Web App, in Tomcat 8x there is a new way to do this : Resources Documentation about" />
    <meta property="og:url" content="https://tcollignon.github.io/2015/05/08/How-to-use-tomcat-8-Resources-to-setup-web-application.html" />
    <meta property="article:tag" content="Tomcat" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How-to use tomcat 8 Resources to setup web application" />
    <meta name="twitter:description" content="This mecanism allow user to start webapp in tomcat 8 without packaging (like WAR). This is interesting in development, to run application as fast as possible. In Tomcat 6x, 7x this is called Virtual Web App, in Tomcat 8x there is a new way to do this : Resources Documentation about" />
    <meta name="twitter:url" content="https://tcollignon.github.io/2015/05/08/How-to-use-tomcat-8-Resources-to-setup-web-application.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="TCO Blog" href="https://tcollignon.github.io/rss/" />
</head>
<body class="post-template tag-Tomcat  noimage">

    


    <article role="main" class="">
        <header>
            <a href="https://tcollignon.github.io" id="home_link">Â«</a>
            <div class="meta"><time datetime="2015-05-08"><a href="/">May 08, 2015</a></time> <span class="count" id="js-reading-time"></span></div>
            <h1>How-to use tomcat 8 Resources to setup web application</h1>
        </header>

        <div class="text" id="js-post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This mecanism allow user to start webapp in tomcat 8 without packaging (like WAR).</p>
</div>
<div class="paragraph">
<p>This is interesting in development, to run application as fast as possible.</p>
</div>
<div class="paragraph">
<p>In Tomcat 6x, 7x this is called <em>Virtual Web App</em>, in Tomcat 8x there is a new way to do this : Resources</p>
</div>
<div class="paragraph">
<p>Documentation about Tomcat Resources is here : <a href="https://tomcat.apache.org/tomcat-8.0-doc/config/resources.html" class="bare">https://tomcat.apache.org/tomcat-8.0-doc/config/resources.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_write_the_configuration">Write the configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this, it&#8217;s necessary to write webapp configuration in tomcat <em>server.xml</em> file.</p>
</div>
<div class="paragraph">
<p>This is an example for an application with some jars, java classes and web parts (jsp and web.xml).</p>
</div>
<div class="paragraph">
<p>The structure of application in the repository is :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>testWebapp</p>
<div class="ulist">
<ul>
<li>
<p>src/main/java</p>
<div class="ulist">
<ul>
<li>
<p>some java files</p>
</li>
</ul>
</div>
</li>
<li>
<p>src/main/webapp</p>
<div class="ulist">
<ul>
<li>
<p>somes jsp</p>
</li>
<li>
<p>WEB-INF/web.xml</p>
</li>
</ul>
</div>
</li>
<li>
<p>pom.xml <em>with jar dependencies</em> (hibernate for example)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Classic way will packaging a WAR file with this structure :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>META-INF</p>
</li>
<li>
<p>WEB-INF</p>
<div class="ulist">
<ul>
<li>
<p>classes <em>(contains .class files)</em></p>
</li>
<li>
<p>lib <em>(contains .jar files)</em></p>
</li>
<li>
<p>web.xml</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>With tomcat resources, we package nothing, and just write into server.xml file :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;Context docBase="/tmp/testWebapp/src/main/webapp" path="/testWebapp" reloadable="false"&gt;
 &lt;Resources&gt;
  &lt;PostResources base="/tmp/testWebapp/target/classes"
                className="org.apache.catalina.webresources.DirResourceSet"
                webAppMount="/WEB-INF/classes"/&gt;
  &lt;PostResources base="/Work/mavenRepository/org/hibernate/hibernate-core/4.3.7.Final/hibernate-core-4.3.7.Final.jar"
                className="org.apache.catalina.webresources.JarResourceSet"
                webAppMount="/WEB-INF/classes"/&gt;
 &lt;/Resources&gt;
&lt;/Context&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The order of each <em>Resources</em> declaration is important for the tomcat classloader.</p>
</div>
<div class="paragraph">
<p>It&#8217;s surprising to mount jar in <em>WEB-INF/classes</em> instead of <em>WEB-INF/lib</em>, but this is the only way I found to make it work correctly with <em>JarResourceSet</em>. The next configuration is dangerous, because it&#8217;s not link the right jar, and cause wrong loading in application, I suggest to not using this :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;Context docBase="/tmp/testWebapp/src/main/webapp" path="/testWebapp" reloadable="false"&gt;
 &lt;Resources&gt;
  &lt;PostResources base="/tmp/testWebapp/target/classes"
                className="org.apache.catalina.webresources.DirResourceSet"
                webAppMount="/WEB-INF/classes"/&gt;
  &lt;PostResources base="/Work/mavenRepository/org/hibernate/hibernate-core/4.3.7.Final"
                className="org.apache.catalina.webresources.DirResourceSet"
                webAppMount="/WEB-INF/lib"/&gt;
 &lt;/Resources&gt;
&lt;/Context&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_who_use_this">Who use this ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/tesla/m2eclipse-webby">Webby</a> use <a href="https://codehaus-cargo.github.io/cargo/Home.html">cargo</a> with Virtual Web App concept to run application in eclipse.</p>
</div>
<div class="paragraph">
<p>This is pretty faster than other way (like WTP), because it pick-up jars in Maven local repository, and will not paste each jar in temporay folder. Each jar is declared in tomcat <em>server.xml</em> configuration file.</p>
</div>
</div>
</div>
        </div>

        <menu>
            <a href="" id="btn_share" class="btn" title="Share">
                <span aria-hidden="true" data-icon="S"></span>
                <strong>Share</strong>
            </a>
            <a href="http://twitter.com/share?text=How-to%20use%20tomcat%208%20Resources%20to%20setup%20web%20application&url=https://tcollignon.github.io/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" id="btn_comment" class="btn" target="_blank">
                <span aria-hidden="true" data-icon="C"></span> Comment on Twitter
            </a>
        </menu>


        <footer class="post-footer" role="contentinfo">

            <div class="vcard">
                <a href="https://tcollignon.github.io/rss" id="btn_feed" class="btn" title="Feed" target="_blank">
                    <span aria-hidden="true" data-icon=")"></span>
                    <strong>Feed</strong>
                </a>

                <a href="https://tcollignon.github.io/author/tcollignon/" class="photo">
                    <span style="background-image: url('https://avatars0.githubusercontent.com/u/1019783?v&#x3D;4');">
                        <img src="https://avatars0.githubusercontent.com/u/1019783?v&#x3D;4" alt="COLLIGNON Thomas">
                    </span>
                </a>

                <div class="details">
                    <h4><a href="https://tcollignon.github.io/author/tcollignon/" class="url n">COLLIGNON Thomas</a></h4>
                    Metz<br>
                    <a href="https://tcollignon.github.io" class="js-remove-domain-schema">https://tcollignon.github.io</a>
                </div>
            </div>

            <div id="user_bio">
                <div class="inner">
                    
                </div>
            </div>

        </footer>




    <section class="post-comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
      var disqus_shortname = 'https-tcollignon-github-io'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </section>


    </article>

    <div id="share_modal">
        <div class="wrap">
            <div class="inner">
                <header>
                    Share
                    <a href="" class="close" title="Close">&times;</a>
                </header>

                <div class="roon-share-links">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                    <div id="fb-elems">
                        <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s); js.id = id;
                        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=463438580397968";
                        fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));</script>
                        <div class="fb-like" data-send="false" data-layout="button_count" data-width="110" data-show-faces="false" data-font="arial"></div>
                    </div>

                    <div id="pinit-btn">
                        <a href="//pinterest.com/pin/create/button/?url=https://tcollignon.github.io/&amp;description=How-to%20use%20tomcat%208%20Resources%20to%20setup%20web%20application-TCO%20Blog " data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png"></a>
                        <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>




        <a href="https://tcollignon.github.io" id="blog_badge">
            <span style="background-image: url('images/tux.png');">TCO Blog</span>
        </a>


    <script>

            function get_text(el) {
                ret = "";
                var length = el.childNodes.length;
                for(var i = 0; i < length; i++) {
                    var node = el.childNodes[i];
                    if(node.nodeType != 8) {
                        ret += node.nodeType != 1 ? node.nodeValue : get_text(node);
                    }
                }
                return ret;
            }
            function reading_time () {
                var post_content = document.getElementById('js-post-content');
                if (post_content) {
                    var words = get_text(post_content),
                        count = words.split(/\s+/).length,
                        read_time = Math.ceil((count / 150)),
                        read_time_node = document.createTextNode(read_time + ' min read');
                    document.getElementById('js-reading-time').appendChild(read_time_node);
                }
            }

        function no_schema_links () {
            var links = document.querySelectorAll('.js-remove-domain-schema');
            if (links) {
                for (i = 0; i < links.length; ++i) {
                    var link = links[i],
                        text = link.innerHTML,
                        no_schema = text.replace(/.*?:\/\//g, "");
                    link.innerHTML = no_schema;
                }
            }
        }

        window.onload = function () {
            no_schema_links();

            reading_time();
        }
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

        <script>
            $(function(){
                var share_modal = $("#share_modal"),
                    update_social_links = true;

                $("#btn_share").click(function(){
                    var that = $(this);
                    share_modal.fadeIn(200);
                    return false;
                });

                share_modal.click(function(e){
                    if (e.target.className == "wrap" || e.target.id == "share_modal") {
                        share_modal.fadeOut(200);
                    }
                    return false;
                });

                share_modal.find("div.inner > header > a.close").click(function(){
                    share_modal.fadeOut(200);
                    return false;
                });
            });
        </script>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-88524010-1', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
